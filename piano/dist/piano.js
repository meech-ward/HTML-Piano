!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){e.exports={pianoKey:"piano-key",whiteKey:"white-key",blackKey:"black-key",keyUp:"key-up",keyDown:"key-down",keyHighlighted:"key-highlighted",piano:"piano",whiteKeys:"white-keys",blackKeys:"black-keys",pianoKeyNumber:e=>"piano-key-"+e}},function(e,t,n){n(0);e.exports=function(n){let o={},i=[];return t=e.exports,document.addEventListener("keydown",function(e){if(!o[e.key]){for(piano of i){const t=n.keyForLetter(e.key,piano,piano.keyboardStartingKeyNumber);t&&piano._keyDown(t)}o[e.key]=!0}}),document.addEventListener("keyup",function(e){for(piano of i){const t=n.keyForLetter(e.key,piano,piano.keyboardStartingKeyNumber);t&&piano._keyUp(t)}o[e.key]=null}),t.addKeyboardEvents=function(e,t,n){e.keyboardStartingKeyNumber=n,i.push(e)},t.removeKeyboardEvents=function(e){const t=i.indexOf(e);t>-1&&i.splice(t,1)},t}},function(e,t){t.pianoKeyNumberFromWhiteKeyNumber=function(e=0,t=[]){let n=0;for(let o=0;o<e;o++)1==t[o]&&n++;return e+n},t.pianoKeyNumberFromBlackKeyNumber=function(e,t){},t.arrayFromBlackKeys=function(e){e=e||[];const t=[];for(layout of e){const e=layout.visible?1:0;for(let n=0;n<layout.amount;n++)t.push(e)}return t},t.keyNumber=function(e){if(!e)return null;if(!e.classList)return null;let t=null;const n=e.classList;for(elementClass of n)if(elementClass.startsWith("piano-key-")){t=Number(elementClass.substr("piano-key-".length));break}return t}},function(e,t,n){const o=n(0);function i(e){const t=["a","s","d","f","g","h","j","k","l",";","'"],n=["q","w","e","r","t","y","u","i","o","p","[","]"];let o=[];for(let i=0;i<e.whiteKeysAmount;i++){1==e.blackKeysArray[i]&&i<n.length&&o.push(n[i]),i<t.length&&o.push(t[i])}return o}function r(e,t,n){const r=i(t);for(let i=0;i<r.length;i++)if(e===r[i]){const e=o.pianoKeyNumber(i+n),r=t.HTML.querySelectorAll("."+e);return r.length>0?r[0]:null}return null}t.keyArray=i,t.keyForLetter=r,t.addLettersToKeys=function(e,t){const n=i(e);for(const o of n){const n=r(o,e,t);if(!n)continue;const i=document.createElement("p");i.classList.add("musical-typing-letter"),i.innerText=o,n.appendChild(i)}},t.removeLettersFromKeys=function(e){const t=e.HTML.querySelectorAll(".musical-typing-letter");for(const e of t)e.remove()}},function(e,t,n){n(2);const o=n(0);t.pianoElementMake=function(){const e=document.createElement("div");e.classList.add(o.piano);const t=document.createElement("div");t.classList.add(o.whiteKeys),e.appendChild(t),this.whiteKeysWrapper=t;const n=document.createElement("div");return n.classList.add(o.blackKeys),e.appendChild(n),this.blackKeysWrapper=n,e},t.whiteKeyMake=function(e,t,n,i){const r=document.createElement("div");return r.classList.add(o.pianoKey,o.whiteKey,o.keyUp,"white-key-"+e,"piano-key-"+n),this.whiteKeysWrapper.appendChild(r),r.style.cssText=`width: ${t}%`,r},t.blackKeyMake=function(e,t,n,i){const r=document.createElement("div");return r.classList.add(o.pianoKey,o.blackKey,"black-key-"+e,o.pianoKeyNumber(n)),this.blackKeysWrapper.appendChild(r),r.style.cssText=`width: ${t}%`,r},t.blackBlankMake=function(e,t,n,o=!1){const i=document.createElement("div");i.classList.add("black-key-blank"),this.blackKeysWrapper.appendChild(i),o&&e--;let r=o?n-t/2:n-t;for(let t=0;t<e;t++)r+=n;return i.style.cssText=`width: ${r}%; height: 10px;`,i}},function(e,t,n){n(0);let o=!1;function i(e,t){for(key of t)key.addEventListener("mousedown",function(t){if(console.log("mouse down"),o)return!1;o=!0,e._keyDown(this)}),key.addEventListener("mouseup",function(t){if(!o)return!1;o=!1,e._keyUp(this)}),key.addEventListener("mouseout",function(t){if(!o)return!1;e._keyUp(this)}),key.addEventListener("mouseover",function(t){if(!o)return!1;e._keyDown(this)})}t.addPianoKeyEventListeners=function(e){i(e,e.whiteKeysWrapper.children),i(e,e.blackKeysWrapper.children)}},function(e,t,n){const o=n(2),i=n(5),r=(n(1),n(4)),s=n(0);let a={keyUp:()=>{},keyDown:()=>{},_keyDown:function(e){e.classList.remove(s.keyUp),e.classList.add(s.keyDown),this.keyDown(o.keyNumber(e))},_keyUp:function(e){e.classList.add(s.keyUp),e.classList.remove(s.keyDown),this.keyUp(o.keyNumber(e))}};function c(e,t){const s=Object.create(a);s.whiteKeysAmount=e,s.blackKeysLayout=t,s.blackKeyWidthPercent=100/e/1.5,s.whiteKeyWidthPercent=100/e,s.blackKeysArray=o.arrayFromBlackKeys(t),s.HTML=r.pianoElementMake.call(s),function(){for(let e=1;e<=this.whiteKeysAmount;e++){const t=o.pianoKeyNumberFromWhiteKeyNumber(e,this.blackKeysArray);r.whiteKeyMake.call(this,e,this.whiteKeyWidthPercent,t,this.whiteKeysAmount)}}.call(s),function(){let e=1,t=0,n=!0;for(let o=0;o<=this.blackKeysArray.length-1;o++){if(0===this.blackKeysArray[o]){t++;continue}r.blackBlankMake.call(this,t,this.blackKeyWidthPercent,this.whiteKeyWidthPercent,n);const i=o;r.blackKeyMake.call(this,e,this.blackKeyWidthPercent,i+e,this.whiteKeysAmount),e++,t=0,n=!1}}.call(s),i.addPianoKeyEventListeners(s);const c=n(3),l=n(1)(c);return s.enableMusicalTyping=function(e=1){l.addKeyboardEvents(this,c,e),c.addLettersToKeys(this,e)},s.disableMusicalTyping=function(){l.removeKeyboardEvents(this),c.removeLettersFromKeys(this)},s}window.newPiano=function(e,t){return"number"==typeof arguments[0]?c(arguments[0],arguments[1]):"object"==typeof arguments[0]?(arguments[0],arguments[1],Object.create(a)):null}}]);